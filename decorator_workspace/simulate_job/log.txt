2023-12-18 21:27:59,385 - SimulatorRunner - INFO - Create the Simulator Server.
2023-12-18 21:27:59,387 - CoreCell - INFO - server: creating listener on tcp://0:56860
2023-12-18 21:27:59,400 - CoreCell - INFO - server: created backbone external listener for tcp://0:56860
2023-12-18 21:27:59,400 - ConnectorManager - INFO - 12173: Try start_listener Listener resources: {'secure': False, 'host': 'localhost'}
2023-12-18 21:27:59,401 - nvflare.fuel.f3.sfm.conn_manager - INFO - Connector [CH00002 PASSIVE tcp://0:27398] is starting
2023-12-18 21:27:59,906 - CoreCell - INFO - server: created backbone internal listener for tcp://localhost:27398
2023-12-18 21:27:59,907 - nvflare.fuel.f3.sfm.conn_manager - INFO - Connector [CH00001 PASSIVE tcp://0:56860] is starting
2023-12-18 21:27:59,964 - nvflare.fuel.hci.server.hci - INFO - Starting Admin Server localhost on Port 56861
2023-12-18 21:27:59,964 - SimulatorRunner - INFO - Deploy the Apps.
2023-12-18 21:28:00,365 - SimulatorRunner - INFO - Create the simulate clients.
2023-12-18 21:28:00,367 - ClientManager - INFO - Client: New client site-1@192.168.0.11 joined. Sent token: c5b6dd32-6f34-42ba-834b-581188c7f7df.  Total clients: 1
2023-12-18 21:28:00,368 - FederatedClient - INFO - Successfully registered client:site-1 for project simulator_server. Token:c5b6dd32-6f34-42ba-834b-581188c7f7df SSID:
2023-12-18 21:28:00,369 - ClientManager - INFO - Client: New client site-2@192.168.0.11 joined. Sent token: d7a758f1-f32e-4a59-ae2d-a1165eddd0b4.  Total clients: 2
2023-12-18 21:28:00,369 - FederatedClient - INFO - Successfully registered client:site-2 for project simulator_server. Token:d7a758f1-f32e-4a59-ae2d-a1165eddd0b4 SSID:
2023-12-18 21:28:00,369 - SimulatorRunner - INFO - Set the client status ready.
2023-12-18 21:28:00,369 - SimulatorRunner - INFO - Deploy and start the Server App.
2023-12-18 21:28:00,369 - Cell - INFO - Register blob CB for channel='server_command', topic='*'
2023-12-18 21:28:00,369 - Cell - INFO - Register blob CB for channel='aux_communication', topic='*'
2023-12-18 21:28:00,369 - ServerCommandAgent - INFO - ServerCommandAgent cell register_request_cb: server.simulate_job
2023-12-18 21:28:01,905 - IntimeModelSelector - INFO - model selection weights control: None
2023-12-18 21:28:01,906 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job]: Server runner starting ...
2023-12-18 21:28:01,906 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job]: starting workflow scatter_and_gather (<class 'nvflare.app_common.workflows.scatter_and_gather.ScatterAndGather'>) ...
2023-12-18 21:28:01,906 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Initializing ScatterAndGather workflow.
2023-12-18 21:28:01,906 - PTFileModelPersistor - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Both source_ckpt_file_full_name and ckpt_preload_path are not provided. Using the default model weights initialized on the persistor side.
2023-12-18 21:28:01,907 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Workflow scatter_and_gather (<class 'nvflare.app_common.workflows.scatter_and_gather.ScatterAndGather'>) started
2023-12-18 21:28:01,907 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Beginning ScatterAndGather training phase.
2023-12-18 21:28:01,907 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Round 0 started.
2023-12-18 21:28:01,907 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: scheduled task train
2023-12-18 21:28:02,386 - SimulatorClientRunner - INFO - Start the clients run simulation.
2023-12-18 21:28:03,387 - SimulatorClientRunner - INFO - Simulate Run client: site-1 on GPU group: None
2023-12-18 21:28:03,388 - SimulatorClientRunner - INFO - Simulate Run client: site-2 on GPU group: None
2023-12-18 21:28:04,456 - nvflare.fuel.f3.sfm.conn_manager - INFO - Connection [CN00005 127.0.0.1:56860 <= 127.0.0.1:56873] is created: PID: 12173
2023-12-18 21:28:04,457 - nvflare.fuel.f3.sfm.conn_manager - INFO - Connection [CN00006 127.0.0.1:56860 <= 127.0.0.1:56874] is created: PID: 12173
2023-12-18 21:28:06,751 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job, task_name=train, task_id=09d76f7d-d5d5-4435-b3ac-f420084b25bf]: assigned task to client site-1: name=train, id=09d76f7d-d5d5-4435-b3ac-f420084b25bf
2023-12-18 21:28:06,751 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job, task_name=train, task_id=09d76f7d-d5d5-4435-b3ac-f420084b25bf]: sent task assignment to client. client_name:site-1 task_id:09d76f7d-d5d5-4435-b3ac-f420084b25bf
2023-12-18 21:28:06,751 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job, task_name=train, task_id=56c29097-2045-46ac-baf4-5c8e00585dea]: assigned task to client site-2: name=train, id=56c29097-2045-46ac-baf4-5c8e00585dea
2023-12-18 21:28:06,752 - GetTaskCommand - INFO - return task to client.  client_name: site-1  task_name: train   task_id: 09d76f7d-d5d5-4435-b3ac-f420084b25bf  sharable_header_task_id: 09d76f7d-d5d5-4435-b3ac-f420084b25bf
2023-12-18 21:28:06,752 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job, task_name=train, task_id=56c29097-2045-46ac-baf4-5c8e00585dea]: sent task assignment to client. client_name:site-2 task_id:56c29097-2045-46ac-baf4-5c8e00585dea
2023-12-18 21:28:06,758 - GetTaskCommand - INFO - return task to client.  client_name: site-2  task_name: train   task_id: 56c29097-2045-46ac-baf4-5c8e00585dea  sharable_header_task_id: 56c29097-2045-46ac-baf4-5c8e00585dea
2023-12-18 21:28:15,924 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job]: got result from client site-2 for task: name=train, id=56c29097-2045-46ac-baf4-5c8e00585dea
2023-12-18 21:28:15,925 - ServerRunner - ERROR - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job, peer_rc=TASK_ABORTED, task_name=train, task_id=56c29097-2045-46ac-baf4-5c8e00585dea]: Aborting current RUN due to FATAL_SYSTEM_ERROR received: Result from site-2 is bad, error code: TASK_ABORTED. ScatterAndGather exiting at round 0.
2023-12-18 21:28:15,926 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job, peer_rc=TASK_ABORTED, task_name=train, task_id=56c29097-2045-46ac-baf4-5c8e00585dea]: asked to abort - triggered abort_signal to stop the RUN
2023-12-18 21:28:15,926 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job, peer_rc=TASK_ABORTED, task_name=train, task_id=56c29097-2045-46ac-baf4-5c8e00585dea]: finished processing client result by scatter_and_gather
2023-12-18 21:28:15,926 - SubmitUpdateCommand - INFO - submit_update process. client_name:site-2   task_id:56c29097-2045-46ac-baf4-5c8e00585dea
2023-12-18 21:28:15,931 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job]: got result from client site-1 for task: name=train, id=09d76f7d-d5d5-4435-b3ac-f420084b25bf
2023-12-18 21:28:15,931 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job, peer_rc=TASK_ABORTED, task_name=train, task_id=09d76f7d-d5d5-4435-b3ac-f420084b25bf]: ignored result submission since server runner's status is done
2023-12-18 21:28:15,931 - SubmitUpdateCommand - INFO - submit_update process. client_name:site-1   task_id:09d76f7d-d5d5-4435-b3ac-f420084b25bf
2023-12-18 21:28:16,007 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Abort signal received. Exiting at round 0.
2023-12-18 21:28:16,007 - ScatterAndGather - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: task train exit with status TaskCompletionStatus.ABORTED
2023-12-18 21:28:16,008 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Workflow: scatter_and_gather finalizing ...
2023-12-18 21:28:16,514 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: ABOUT_TO_END_RUN fired
2023-12-18 21:28:16,516 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Firing CHECK_END_RUN_READINESS ...
2023-12-18 21:28:16,517 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: END_RUN fired
2023-12-18 21:28:16,517 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: Server runner finished.
2023-12-18 21:28:16,924 - SimulatorServer - INFO - Server app stopped.


2023-12-18 21:28:17,199 - nvflare.fuel.hci.server.hci - INFO - Admin Server localhost on Port 56861 shutdown!
2023-12-18 21:28:17,200 - SimulatorServer - INFO - shutting down server
2023-12-18 21:28:17,201 - SimulatorServer - INFO - canceling sync locks
2023-12-18 21:28:17,201 - SimulatorServer - INFO - server off
2023-12-18 21:28:17,939 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-2, peer_run=simulate_job]: server runner is finalizing - asked client to end the run
2023-12-18 21:28:17,939 - GetTaskCommand - INFO - return task to client.  client_name: site-2  task_name: __end_run__   task_id:   sharable_header_task_id: 
2023-12-18 21:28:17,941 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather, peer=site-1, peer_run=simulate_job]: server runner is finalizing - asked client to end the run
2023-12-18 21:28:17,941 - GetTaskCommand - INFO - return task to client.  client_name: site-1  task_name: __end_run__   task_id:   sharable_header_task_id: 
2023-12-18 21:28:17,944 - FederatedClient - INFO - Shutting down client run: site-1
2023-12-18 21:28:17,944 - nvflare.fuel.f3.sfm.conn_manager - INFO - Connection [CN00006 Not Connected] is closed PID: 12173
2023-12-18 21:28:17,945 - FederatedClient - INFO - Shutting down client run: site-2
2023-12-18 21:28:17,946 - ServerRunner - INFO - [identity=simulator_server, run=simulate_job, wf=scatter_and_gather]: asked to abort - triggered abort_signal to stop the RUN
2023-12-18 21:28:17,946 - nvflare.fuel.f3.sfm.conn_manager - INFO - Connection [CN00005 Not Connected] is closed PID: 12173
2023-12-18 21:28:21,467 - MPM - INFO - MPM: Good Bye!
